"use strict";(self["webpackChunkadmin_gereja"]=self["webpackChunkadmin_gereja"]||[]).push([[423],{5423:function(e,a,t){t.r(a),t.d(a,{default:function(){return B}});var n=t(3396),i=t(7139),r=t(9242);const s={class:"add-button-container"},d=(0,n._)("i",{class:"fas fa-plus"},null,-1),l={class:"d-flex justify-content-center mt-5"},o={class:"custom-card-content"},g={class:"custom-card-image"},c=["src","onClick"],u=["onChange"],p={class:"custom-card-details"},m={class:"title"},k={key:0},h=["onUpdate:modelValue","required"],f={key:2,class:"date-and-period-container"},_={class:"left-align"},w={class:"right-align"},y=["onUpdate:modelValue","onChange","required"],C={class:"kategori-and-tempat"},v=(0,n._)("td",null,"Kategori",-1),D=(0,n._)("td",null,":",-1),b={key:0},U={key:1},I=["onUpdate:modelValue","required"],$=(0,n._)("td",null,"Tempat",-1),q=(0,n._)("td",null,":",-1),V={key:0},E={key:1},j=["onUpdate:modelValue","required"],z=(0,n._)("hr",null,null,-1),K={key:0},M=["onUpdate:modelValue","required"],P={class:"button-card"},T=["onClick"],x=(0,n._)("i",{class:"fas fa-edit"},null,-1),F=["onClick"],S=(0,n._)("i",{class:"fas fa-save"},null,-1),Y=["onClick"],Z=(0,n._)("i",{class:"fas fa-trash-alt"},null,-1);function N(e,a,t,N,L,R){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",s,[(0,n._)("button",{class:"custom-card-button",onClick:a[0]||(a[0]=(...e)=>R.addCard&&R.addCard(...e))},[d,(0,n.Uk)(" Tambah ")])]),(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(L.cards,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:"custom-card"},[(0,n._)("div",o,[(0,n._)("div",g,[(0,n._)("img",{src:e.gambar,alt:"Profile Picture",onClick:t=>R.openImageInput(e,a)},null,8,c),(0,n._)("input",{type:"file",accept:"image/*",onChange:()=>R.uploadImage(a),ref_for:!0,ref:"imageInput_"+a,style:{display:"none"}},null,40,u)]),(0,n._)("div",p,[(0,n._)("form",null,[(0,n._)("div",m,[e.editing?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,"onUpdate:modelValue":a=>e.nama_kegiatan=a,class:"custom-input",placeholder:"Nama",required:e.editing,style:(0,i.j5)({display:e.editing?"block":"none"})},null,12,h)),[[r.nr,e.nama_kegiatan]]):((0,n.wg)(),(0,n.iD)("h3",k,(0,i.zw)(e.nama_kegiatan),1)),e.editing?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:3,type:"date","onUpdate:modelValue":a=>e.tanggal=a,class:"custom-input",placeholder:"Tanggal",onChange:e=>R.updatePeriode(a),required:e.editing},null,40,y)),[[r.nr,e.tanggal]]):((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",_,[(0,n._)("h6",null,"Tanggal: "+(0,i.zw)(R.formatDate(e.tanggal)),1)]),(0,n._)("div",w,[(0,n._)("h6",null," Periode: "+(0,i.zw)(e.periode),1)])])),(0,n._)("table",C,[(0,n._)("tbody",null,[(0,n._)("tr",null,[v,D,e.editing?((0,n.wg)(),(0,n.iD)("td",U,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a=>e.kategori=a,class:"custom-input",placeholder:"Kategori",required:e.editing},null,8,I),[[r.nr,e.kategori]])])):((0,n.wg)(),(0,n.iD)("td",b,(0,i.zw)(e.kategori),1))]),(0,n._)("tr",null,[$,q,e.editing?((0,n.wg)(),(0,n.iD)("td",E,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":a=>e.tempat=a,class:"custom-input",placeholder:"Tempat Kegiatan",required:e.editing},null,8,j),[[r.nr,e.tempat]])])):((0,n.wg)(),(0,n.iD)("td",V,(0,i.zw)(e.tempat),1))])])])]),z,e.editing?(0,n.wy)(((0,n.wg)(),(0,n.iD)("textarea",{key:1,"onUpdate:modelValue":a=>e.keterangan=a,class:"custom-input",placeholder:"Keterangan Kegiatan",required:e.editing},null,8,M)),[[r.nr,e.keterangan]]):((0,n.wg)(),(0,n.iD)("p",K,(0,i.zw)(e.keterangan),1)),(0,n._)("div",P,[e.editing?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"custom-card-button",onClick:e=>R.saveCard(a)},[S,(0,n.Uk)(" Save ")],8,F)):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"custom-card-button",onClick:e=>R.toggleEditMode(a)},[x,(0,n.Uk)(" Edit ")],8,T)),(0,n._)("button",{class:"delete-button",onClick:e=>R.deleteCard(a)},[Z,(0,n.Uk)(" Delete ")],8,Y)])])])])])))),128))])])}t(1719);var L=t(4161),R={data(){return{cards:[{nama_kegiatan:"",tanggal:"",periode:"",tempat:"",keterangan:"",gambar:"",kategori:"",editing:!1}]}},mounted(){this.fetchCards()},methods:{updatePeriode(e){const a=this.cards[e],t=new Date(a.tanggal);if(!isNaN(t.getFullYear())){const e=t.getFullYear()+1;a.periode=`${t.getFullYear()}/${e}`}},async fetchCards(){try{const e=await L.Z.get("https://siswaapi.gkiswjateng.org/api/kegiatan");this.cards=e.data}catch(e){console.error("Error fetching cards:",e)}},async deleteCard(e){try{const a=this.cards[e];if(a.id){const t=await L.Z.delete(`https://siswaapi.gkiswjateng.org/api/kegiatan/${a.id}`);200===t.status?this.cards.splice(e,1):console.error(`Error deleting card: ${t.status}`)}}catch(a){console.error("Error deleting card:",a)}},addCard(){this.cards.unshift({nama_kegiatan:"",tanggal:"",periode:"",tempat:"",keterangan:"",gambar:"",kategori:"",editing:!1})},toggleEditMode(e){const a=this.cards[e];if(a){if(a.editing&&(!a.nama_kegiatan||!a.tanggal||!a.periode||!a.tempat||!a.keterangan||!a.gambar||!a.kategori))return void(a.errorMessage="Silakan isi semua kolom.");a.editing=!a.editing}},async saveCard(e){const a=this.cards[e];a.errorMessage="";try{const t=await L.Z[a.id?"put":"post"](a.id?`https://siswaapi.gkiswjateng.org/api/doa/${a.id}`:"https://siswaapi.gkiswjateng.org/api/doa",a);this.$set(this.cards,e,{...a,...t.data}),a.editing=!1}catch(t){if(console.error("Error saving card:",t),t.response&&t.response.data){const e=t.response.data.message;a.errorMessage=`Error: ${e}`}else a.errorMessage="Error saving data."}},formatDate(e){const a={year:"numeric",month:"2-digit",day:"2-digit"},t=new Date(e);return t.toLocaleDateString("en-US",a)},uploadImage(e){const a=this.cards[e];if(a.editing){const t=this.$refs["imageInput_"+e][0];if(t&&t.files&&t.files.length>0){const e=t.files[0],n=new FileReader;n.onload=e=>{a.gambar=e.target.result,a.imageChanged=!0},n.readAsDataURL(e)}else console.error(`Input element for index ${e} is undefined or has no selected file.`)}},openImageInput(e,a){if(e.editing){const e=this.$refs["imageInput_"+a][0];e?e.click():console.error(`Input element for index ${a} is undefined.`)}}}},A=t(89);const H=(0,A.Z)(R,[["render",N]]);var B=H}}]);
//# sourceMappingURL=423.d38f688b.js.map