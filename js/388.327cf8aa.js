"use strict";(self["webpackChunkadmin_gereja"]=self["webpackChunkadmin_gereja"]||[]).push([[388],{4388:function(e,a,t){t.r(a),t.d(a,{default:function(){return Oe}});var l=t(3396),n=t(7139),i=t(9242);const o=(0,l._)("div",{style:{height:"5px"}},null,-1),r={class:"add-button-container"},d=(0,l._)("i",{class:"fas fa-plus"},null,-1),s={class:"d-flex justify-content-center mt-5"},u={class:"custom-card-content"},c={class:"custom-card-image"},p=["src","onClick"],g=["onChange"],_={class:"custom-card-details"},m={class:"table-borderless"},k=(0,l._)("td",null,"Nama",-1),h=(0,l._)("td",null,":",-1),w={key:0},f={key:1},y=["onUpdate:modelValue"],D=(0,l._)("td",null,"Tanggal Lahir",-1),v=(0,l._)("td",null,":",-1),U={key:0},C={key:1},b=["onUpdate:modelValue","required"],V=(0,l._)("td",null,"Tempat Lahir",-1),M=(0,l._)("td",null,":",-1),I={key:0},S={key:1},j=["onUpdate:modelValue"],P=(0,l._)("td",null,"Jenis Kelamin",-1),q=(0,l._)("td",null,":",-1),z={key:0},E={key:1},L={class:"radio-group",required:""},A=["onUpdate:modelValue"],G=["onUpdate:modelValue"],T=(0,l._)("td",null,"Golongan Darah",-1),$=(0,l._)("td",null,":",-1),x={key:0},B={key:1},Z=["onUpdate:modelValue"],F=(0,l._)("option",{value:"A"},"Golongan A",-1),N=(0,l._)("option",{value:"B"},"Golongan B",-1),O=(0,l._)("option",{value:"AB"},"Golongan AB",-1),K=(0,l._)("option",{value:"O"},"Golongan O",-1),H=[F,N,O,K],R=(0,l._)("td",null,"Pendidikan Terakhir",-1),W=(0,l._)("td",null,":",-1),Y={key:0},J={key:1},Q=["onUpdate:modelValue"],X=(0,l.uE)('<option value="SD">SD</option><option value="SMP">SMP</option><option value="SMA">SMA</option><option value="Diploma">Diploma</option><option value="Sarjana">Sarjana</option><option value="Pascasarjana">Pascasarjana</option>',6),ee=[X],ae=(0,l._)("td",null,"Pekerjaan",-1),te=(0,l._)("td",null,":",-1),le={key:0},ne={key:1},ie=["onUpdate:modelValue"],oe=(0,l.uE)('<option value="PNS">PNS</option><option value="Guru">Guru</option><option value="Dokter">Dokter</option><option value="Wiraswasta">Wiraswasta</option><option value="Lainnya">Lainnya</option>',5),re=[oe],de=(0,l._)("td",null,"Status",-1),se=(0,l._)("td",null,":",-1),ue={key:0},ce={key:1},pe=["onUpdate:modelValue"],ge=(0,l._)("option",{value:"Sudah Menikah"},"Sudah Menikah",-1),_e=(0,l._)("option",{value:"Belum Menikah"},"Belum Menikah",-1),me=[ge,_e],ke=(0,l._)("td",null,"Telepon",-1),he=(0,l._)("td",null,":",-1),we={key:0},fe={key:1},ye=["onUpdate:modelValue"],De=(0,l._)("td",null,"Klasis",-1),ve=(0,l._)("td",null,":",-1),Ue={key:0},Ce={key:1},be=["onUpdate:modelValue"],Ve=(0,l._)("td",null,"Alamat",-1),Me=(0,l._)("td",null,":",-1),Ie={key:0},Se={key:1},je=["onUpdate:modelValue"],Pe={class:"button-card"},qe=["onClick"],ze=(0,l._)("i",{class:"fas fa-edit"},null,-1),Ee=["onClick"],Le=(0,l._)("i",{class:"fas fa-save"},null,-1),Ae=["onClick"],Ge=(0,l._)("i",{class:"fas fa-trash-alt"},null,-1);function Te(e,a,t,F,N,O){return(0,l.wg)(),(0,l.iD)(l.HY,null,[o,(0,l._)("div",r,[(0,l._)("button",{class:"custom-card-button",onClick:a[0]||(a[0]=(...e)=>O.addCard&&O.addCard(...e))},[d,(0,l.Uk)(" Tambah ")])]),(0,l._)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(N.cards,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"custom-card",key:e.id},[(0,l._)("div",u,[(0,l._)("div",c,[(0,l._)("img",{src:e.profile_picture,alt:"Profile Picture",onClick:t=>O.openImageInput(e,a)},null,8,p),(0,l._)("input",{type:"file",accept:"image/*",onChange:()=>O.uploadImage(a),ref_for:!0,ref:"imageInput_"+a,style:{display:"none"}},null,40,g)]),(0,l._)("div",_,[(0,l._)("form",null,[(0,l._)("table",m,[(0,l._)("tr",null,[k,h,e.editing?((0,l.wg)(),(0,l.iD)("td",f,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a=>e.nama_lengkap=a,class:"custom-input",required:""},null,8,y),[[i.nr,e.nama_lengkap]])])):((0,l.wg)(),(0,l.iD)("td",w,(0,n.zw)(e.nama_lengkap),1))]),(0,l._)("tr",null,[D,v,e.editing?((0,l.wg)(),(0,l.iD)("td",C,[(0,l.wy)((0,l._)("input",{type:"date","onUpdate:modelValue":a=>e.tanggal_lahir=a,class:"custom-input",placeholder:"Tanggal",required:e.editing,style:(0,n.j5)({display:e.editing?"block":"none"})},null,12,b),[[i.nr,e.tanggal_lahir]])])):((0,l.wg)(),(0,l.iD)("td",U,(0,n.zw)(O.formatDate(e.tanggal_lahir)),1))]),(0,l._)("tr",null,[V,M,e.editing?((0,l.wg)(),(0,l.iD)("td",S,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a=>e.tempat_lahir=a,class:"custom-input",required:""},null,8,j),[[i.nr,e.tempat_lahir]])])):((0,l.wg)(),(0,l.iD)("td",I,(0,n.zw)(e.tempat_lahir),1))]),(0,l._)("tr",null,[P,q,e.editing?((0,l.wg)(),(0,l.iD)("td",E,[(0,l._)("fieldset",L,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"radio","onUpdate:modelValue":a=>e.kelamin=a,value:"Laki-Laki",class:"lakilaki"},null,8,A),[[i.G2,e.kelamin]]),(0,l.Uk)(" Laki-Laki ")]),(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"radio","onUpdate:modelValue":a=>e.kelamin=a,value:"Perempuan",class:"perempuan"},null,8,G),[[i.G2,e.kelamin]]),(0,l.Uk)(" Perempuan ")])])])):((0,l.wg)(),(0,l.iD)("td",z,(0,n.zw)(e.kelamin),1))]),(0,l._)("tr",null,[T,$,e.editing?((0,l.wg)(),(0,l.iD)("td",B,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a=>e.goldar=a,class:"custom-select",required:""},H,8,Z),[[i.bM,e.goldar]])])):((0,l.wg)(),(0,l.iD)("td",x,(0,n.zw)(e.golongan_darah),1))]),(0,l._)("tr",null,[R,W,e.editing?((0,l.wg)(),(0,l.iD)("td",J,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a=>e.pendidikan_terakhir=a,class:"custom-select",required:""},ee,8,Q),[[i.bM,e.pendidikan_terakhir]])])):((0,l.wg)(),(0,l.iD)("td",Y,(0,n.zw)(e.pendidikan_terakhir),1))]),(0,l._)("tr",null,[ae,te,e.editing?((0,l.wg)(),(0,l.iD)("td",ne,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a=>e.profesi=a,class:"custom-select",required:""},re,8,ie),[[i.bM,e.profesi]])])):((0,l.wg)(),(0,l.iD)("td",le,(0,n.zw)(e.profesi),1))]),(0,l._)("tr",null,[de,se,e.editing?((0,l.wg)(),(0,l.iD)("td",ce,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":a=>e.status=a,class:"custom-select",required:""},me,8,pe),[[i.bM,e.status]])])):((0,l.wg)(),(0,l.iD)("td",ue,(0,n.zw)(e.status),1))]),(0,l._)("tr",null,[ke,he,e.editing?((0,l.wg)(),(0,l.iD)("td",fe,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a=>e.no_telp=a,class:"custom-input",required:""},null,8,ye),[[i.nr,e.no_telp]])])):((0,l.wg)(),(0,l.iD)("td",we,(0,n.zw)(e.no_telp),1))]),(0,l._)("tr",null,[De,ve,e.editing?((0,l.wg)(),(0,l.iD)("td",Ce,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a=>e.klasis=a,class:"custom-input",required:""},null,8,be),[[i.nr,e.klasis]])])):((0,l.wg)(),(0,l.iD)("td",Ue,(0,n.zw)(e.klasis),1))]),(0,l._)("tr",null,[Ve,Me,e.editing?((0,l.wg)(),(0,l.iD)("td",Se,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":a=>e.alamat=a,class:"custom-input",required:""},null,8,je),[[i.nr,e.alamat]])])):((0,l.wg)(),(0,l.iD)("td",Ie,(0,n.zw)(e.alamat),1))])]),(0,l._)("div",Pe,[e.editing?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"custom-card-button",onClick:e=>O.saveCard(a)},[Le,(0,l.Uk)(" Save ")],8,Ee)):((0,l.wg)(),(0,l.iD)("button",{key:0,class:"custom-card-button",onClick:e=>O.toggleEditMode(a)},[ze,(0,l.Uk)(" Edit ")],8,qe)),(0,l._)("button",{class:"delete-button",onClick:e=>O.deleteCard(a)},[Ge,(0,l.Uk)(" Delete ")],8,Ae)])])])])])))),128))])],64)}t(1719);var $e=t(9298),xe=t(4161),Be=t(9865),Ze={DatePicker:$e.Z,data(){return{editMode:!1,cards:[{nama_lengkap:"",tanggal_lahir:"",tempat_lahir:"",kelamin:"",golongan_darah:"",profesi:"",pendidikan_terakhir:"",no_telp:"",alamat:"",klasis:"",status:"",profile_picture:"",editing:!1,imageChanged:!1,isInvalid:!1,errorMessage:""}],imageInputs:[]}},mounted(){this.fetchCards()},methods:{loginUser(){const e=this.getTokenFromCookie();Be.tN.setToken(e)},getTokenFromCookie(){const e=document.cookie,a=e.indexOf("token=");if(-1!==a){const t=e.indexOf(";",a),l=-1!==t?e.slice(a+6,t):e.slice(a+6);return l}return null},toggleEditMode(e){try{const a=this.cards[e];if(a){if(a.editing){if(!a.judul_ibadah||!a.tema_ibadah||!a.pendeta||!a.foto_pendeta||!a.jenis_ibadah||!a.tanggal||!a.waktu||!a.link_rekaman)return void(a.errorMessage="Silakan isi semua kolom.");a.errorMessage=""}a.editing=!a.editing}}catch(a){console.error("Error toggling edit mode:",a)}},async fetchCards(){try{const e=await xe.Z.get("https://siswaapi.gkiswjateng.org/api/user");this.cards=e.data}catch(e){console.error("Error fetching cards:",e)}},async saveCard(e){try{const a=this.cards[e];if(!a.nama_lengkap||!a.tanggal_lahir||!a.tempat_lahir||!a.kelamin||!a.golongan_darah||!a.profesi||!a.pendidikan_terakhir||!a.no_telp||!a.alamat||!a.klasis||!a.status||!a.profile_picture)return void(a.errorMessage="Silakan isi semua kolom.");if(a.id)await xe.Z.put(`https://siswaapi.gkiswjateng.org/api/user/${a.id}`,a);else{const e=await xe.Z.post("https://siswaapi.gkiswjateng.org/api/user",a);e.data&&e.data.id&&(a.id=e.data.id)}a.editing=!1,a.errorMessage=""}catch(a){console.error("Error saving card:",a)}},async deleteCard(e){try{const a=this.cards[e];if(a.id){const t=await xe.Z.delete(`https://siswaapi.gkiswjateng.org/api/user/${a.id}`);200===t.status?this.cards.splice(e,1):(console.error(`Error deleting card: ${t.status}`),alert("Failed to delete card. Please try again."))}else console.error("Invalid card or missing ID for deletion."),alert("Invalid card or missing ID for deletion.")}catch(a){console.error("Error deleting card:",a),alert("An error occurred while deleting the card. Please try again.")}},addCard(){this.cards.unshift({nama_lengkap:"",tanggal_lahir:"",tempat_lahir:"",kelamin:"",goldar:"",profesi:"",pendidikan_terakhir:"",no_telepon:"",alamat:"",profile_picture:"",editing:!0,imageChanged:!1,isInvalid:!1,errorMessage:""}),this.imageInputs.unshift(null)},openImageInput(e,a){if(e.editing){const e=this.$refs["imageInput_"+a][0];e?e.click():console.error(`Input element for index ${a} is undefined.`)}},uploadImage(e){const a=this.cards[e];if(a.editing){const t=this.$refs["imageInput_"+e][0];if(t&&t.files&&t.files.length>0){const e=t.files[0],l=new FileReader;l.onload=e=>{a.profile_picture=e.target.result,a.imageChanged=!0},l.readAsDataURL(e)}else console.error(`Input element for index ${e} is undefined or has no selected file.`)}},formatDate(e){const a={year:"numeric",month:"2-digit",day:"2-digit"},t=new Date(e);return t.toLocaleDateString("en-US",a)}}},Fe=t(89);const Ne=(0,Fe.Z)(Ze,[["render",Te]]);var Oe=Ne}}]);
//# sourceMappingURL=388.327cf8aa.js.map