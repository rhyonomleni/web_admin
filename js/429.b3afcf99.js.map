{"version":3,"file":"js/429.b3afcf99.js","mappings":"i+BAkCA,MAAMA,GAAYC,EAAAA,EAAAA,MAEZC,GAAcC,EAAAA,EAAAA,IAAI,MAClBC,GAASC,EAAAA,EAAAA,MAETC,EAAQA,KAEZC,OAAOC,SAASC,KAAO,8CAA8C,EAevEC,eAAeC,EAAkBC,GAC/B,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,wDAAyD,CAAEH,SAC5FZ,EAAUgB,eAAeH,EAASI,KAAKC,OACvChB,EAAYiB,MAAQN,EAASI,KAAKG,KAElChB,EAAOiB,KAAK,gBACd,CAAE,MAAOC,GAEPC,QAAQD,MAAM,2BAA4BA,EAC5C,CACF,C,OAtBAE,EAAAA,EAAAA,KAAU,KACR,GAAIjB,OAAOC,SAASC,KAAKgB,SAAS,yDAA0D,CAC1F,MAAMC,EAAS,IAAIC,gBAAgBpB,OAAOC,SAASoB,QAC7ChB,EAAOc,EAAOX,IAAI,QAEpBH,GACFD,EAAkBC,EAEtB,K,sbClDF,MAAMiB,EAAc,EAEpB,O","sources":["webpack://admin-gereja/./src/views/LoginView.vue","webpack://admin-gereja/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\r\n  <section style=\"text-align: center;\">\r\n    <div class=\"card\" style=\"margin: 1rem;\">\r\n      <div style=\"display: flex; align-items: center;\">\r\n        <div style=\"flex: 0 0 11.295%; max-width: 11.295;\">\r\n          <div style=\"padding: 1.25rem; margin-right: 0; margin-left: 0;\">\r\n            <form>\r\n              <p v-if=\"userDetails\">Profile Picture: <img :src=\"userDetails.profile_picture\" alt=\"Profile Picture\"></p>\r\n              <div style=\"margin-bottom: 1rem;\">\r\n                <button class=\"btn google-btn social-btn\" type=\"button\" @click=\"login\">\r\n                  <span><i class=\"fab fa-google-plus-g\"></i> Sign in with Google</span>\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        <div style=\"flex: 0 0 83.704%; max-width: 83.704;\">\r\n          <img\r\n            src=\"https://d1hjkbq40fs2x4.cloudfront.net/2018-10-31/files/composition-basics-framing-close-up_1785-1.jpg\"\r\n            alt=\"Trendy Pants and Shoes\"\r\n            style=\"width: 100%; border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; height: 100%;\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'vue-router';\r\nimport { useAuthStore } from '@/stores/auth'; // Import the Pinia store\r\n\r\nconst authStore = useAuthStore(); // Access the Pinia store\r\n\r\nconst userDetails = ref(null);\r\nconst router = useRouter();\r\n\r\nconst login = () => {\r\n  // Redirect to the backend URL for Google Sign-In\r\n  window.location.href = 'https://siswaapi.gkiswjateng.org/auth/google';\r\n};\r\n\r\n// Handle the callback URL on page load\r\nonMounted(() => {\r\n  if (window.location.href.includes('https://siswaapi.gkiswjateng.org/auth/google/callback')) {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const code = params.get('code');\r\n    \r\n    if (code) {\r\n      sendCodeToBackend(code);\r\n    }\r\n  }\r\n});\r\n\r\nasync function sendCodeToBackend(code) {\r\n  try {\r\n    const response = await axios.get('https://siswaapi.gkiswjateng.org/auth/google/callback', { code });\r\n    authStore.setAccessToken(response.data.token); // Update the Pinia store\r\n    userDetails.value = response.data.user;\r\n    // Redirect to the '/daftarjemaat' route\r\n    router.push('/daftarjemaat')\r\n  } catch (error) {\r\n    // Handle errors\r\n    console.error('Error connecting to API:', error);\r\n  }\r\n}\r\n</script>","import script from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["authStore","useAuthStore","userDetails","ref","router","useRouter","login","window","location","href","async","sendCodeToBackend","code","response","axios","get","setAccessToken","data","token","value","user","push","error","console","onMounted","includes","params","URLSearchParams","search","__exports__"],"sourceRoot":""}